# FlyingRobotics_NTOStage2

## Инструкция по запуску
- 1)	Зайдя в терминал, склонируйте репозиторий Tw34ky/FlyingRobotics_NTOStage2 командой “```git clone https://github.com/Tw34ky/FlyingRobotics_NTOStage2.git```”
- 2)	Перейдите в директорию FlyingRobotics_NTOStage2 (“```cd FlyingRobotics_NTOStage2```”)
- 3)	Запустите файл configure.py (“```python3 configure.py```”). В данном файле содержится настройка файлов clover.launch и aruco.launch, замена встроенной текстуры линии на нужную - для выполнения задания, случайная генерация мира и его добавление в файлы Gazebo.
- 4)	Запустите файл app.py (“```python3 app.py```”) и перейдите в браузере по адресу “http://127.0.10.10:5000/” . Там вы увидите веб-приложение, разработанное для управления миссией и мониторинга её прогресса. Кнопка “Старт” начинает выполнение миссии, кнопка “Стоп” останавливает выполнение и садит дрона на землю, кнопка “Kill” отключает двигатели.

### Демонстрация работы: [https://disk.yandex.ru/i/sVQOKgbJjIr7Sg](https://disk.yandex.ru/i/sVQOKgbJjIr7Sg)


## Наши задачи:

### 1. Установить образ симулятора Gazebo или ПО на свою систему
### 2. Подготовить ```bash/python``` скрипт для настройки образа симулятора (включение навигации по aruco-картам, и т. д.):

- Настройка ```clover.launch```
- Настройка ```aruco.launch```
- **Сделать замену текстур**
- Дополнительные настройки, необходимые для выполнения задания

### 3. Подготовить ```bash```/```python``` скрипт для случайной генерации мира

- Подготовить модель нефтепровода (основная труба) - линия, начало в точке (1, 1), 5-10 метров, толщиной 20 см, с одним изгибом не более 30°, в пределах карты aruco маркеров
- В случайном порядке установить врезки - ответвления от основной трубы длины до 2 метров, толщиной 10 см, и углом от основной трубы 90° - в основную трубу нефтепровода в количестве 5 штук
- Минимальное расстояние между врезками (ответвлениями) 0.75 м
- Каждая врезка (ответвления) должна находиться в пределах основной трубы нефтепровода
- Координаты врезок (ответвлений) генерируются случайно
  
### 4. Подготовить python скрипт (ROS-ноду) для выполнения полета и выполнения сканирования

- При сканировании определить координаты врезок в системе aruco_map (Погрешность при определении координат врезок (ответвлений) ±0.5м по каждой оси )
- На миссию ограничено количество взлетов и посадок в размере 1
- Возврат на старт после выполнения сканирования
- Все результаты сканирования записывать в топик (название /tubes, тип данных на усмотрение команды)
  
### 5. Разработать веб-приложение с графическим интерфейсом пользователя, в котором будет находиться кнопки управления миссией (старт, стоп, kill switch), найденные врезки (ответвления) с привязкой к карте
Кнопки управления миссией:
- старт – запуск кода с предыдущего шага (если код запущен - кнопка недоступна)
- стоп – прерывание кода, выполнение посадки
- kill switch – прерывание кода, дизарм дрона
- автоматически обновляемая 2d карта, с возможностью отображения начала координат, карты aruco_map, основной трубы нефтепровода и каждой найденной врезки (пересечения с основной трубой) с привязкой к карте
- автоматически обновляемый список найденных врезок (ответвлений) и их координат
### 6. Записать видео прохождения миссии, на котором одновременно видно: основное окно симулятора (камера должна постоянно видеть квадрокоптер), терминал (где видно имя файла кода, который запускается), вывод ROS топика (rostopic echo или в браузере) и веб приложение.
